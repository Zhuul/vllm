# Build configuration for extras/podman helpers.
# Source this file to provide default versions when building the dev image.

# Core software versions
export CUDA_VERSION=${CUDA_VERSION:-13.0.1}
export BASE_FLAVOR=${BASE_FLAVOR:-rockylinux10}
export UBI_VERSION=${UBI_VERSION:-10}
export PYTHON_VERSION=${PYTHON_VERSION:-3.12}
export VLLM_TAG=${VLLM_TAG:-main}

# Architecture settings (space-separated for torch, semicolon-separated for nvcc)
export TORCH_CUDA_ARCH_LIST=${TORCH_CUDA_ARCH_LIST:-"8.0 8.6 8.9 9.0 12.0 13.0"}
export CUDA_ARCHS=${CUDA_ARCHS:-"80;86;89;90;120"}

# Optional components
export INSTALL_TORCHVISION=${INSTALL_TORCHVISION:-1}
export INSTALL_TORCHAUDIO=${INSTALL_TORCHAUDIO:-1}
export REQUIRE_FFMPEG=${REQUIRE_FFMPEG:-1}
export INSTALL_CUDA_OPTIONAL_DEVEL=${INSTALL_CUDA_OPTIONAL_DEVEL:-1}
export CUDNN_FLAVOR=${CUDNN_FLAVOR:-9}

# CUDA optional library toggles (consumed by setup.py via USE_* env vars)
export USE_CUBLAS=${USE_CUBLAS:-1}
export USE_CUDNN=${USE_CUDNN:-1}
export USE_CUFILE=${USE_CUFILE:-0}
export USE_CUSPARSE=${USE_CUSPARSE:-1}
export USE_CUSPARSELT=${USE_CUSPARSELT:-1}
export USE_CUDSS=${USE_CUDSS:-0}

# Workspace defaults
export VLLM_WORK_VOLUME=${VLLM_WORK_VOLUME:-vllm-work}
export VLLM_WORK_DIR_CONTAINER=${VLLM_WORK_DIR_CONTAINER:-/opt/work}

# Image naming helpers
export VLLM_BASE_IMAGE=${VLLM_BASE_IMAGE:-"nvidia/cuda:${CUDA_VERSION}-cudnn-devel-${BASE_FLAVOR}"}
export VLLM_IMAGE_TAG=${VLLM_IMAGE_TAG:-"vllm-cuda${CUDA_VERSION}-ubi${UBI_VERSION}"}
